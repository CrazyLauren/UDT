{
  "definitions": {
    "header_id": {
      "properties": {
        "___number": {
          "headerTemplate": "{%if settings.language == 'ru'%}Номер сообщения{%else%}Message #{%endif%}",
          "title": "Message #",
          "type": "integer",
          "propertyOrder": -1,
          "minimum": 1,
          "watch": {
            "settings": "settings"
          }
        }
      },
      "required": [
        "___number"
      ]
    },
    "id": {
      "type": "string",
      "minLength": 0,
      "maxLength": 24,
      "pattern": "^[a-zA-Z0-9_]+$"
    },
    "version": {
      "headerTemplate": "{%if settings.language == 'ru'%}Версия {%else%}Protocol version{%endif%} {{self.major}}.{{self.minor}}",
      "type": "object",
      "format": "grid-strict",
      "properties": {
        "major": {
          "headerTemplate": "{%if settings.language == 'ru'%}Основная{%else%}Major{%endif%}",
          "propertyOrder": 1,
          "type": "integer",
          "minimum": 0,
          "watch": {
            "settings": "settings"
          }
        },
        "minor": {
          "headerTemplate": "{%if settings.language == 'ru'%}Дополнительная{%else%}Minor{%endif%}",
          "propertyOrder": 2,
          "type": "integer",
          "minimum": 0,
          "watch": {
            "settings": "settings"
          }
        },
        "revision": {
          "headerTemplate": "{%if settings.language == 'ru'%}Редакция{%else%}Revision{%endif%}",
          "watch": {
            "settings": "settings"
          },
          "propertyOrder": 3,
          "type": "integer",
          "minimum": 0
        },
        "date": {
          "headerTemplate": "{%if settings.language == 'ru'%}Дата{%else%}Date{%endif%}",
          "watch": {
            "settings": "settings"
          },
          "propertyOrder": 0,
          "type": "string",
          "format": "date",
          "minimum": 0
        }
      },
      "additionalProperties": true,
      "required": [
        "major",
        "minor"
      ],
      "watch": {
        "settings": "settings"
      }
    },
    "message_scheme": {
      "title": "Add message description!",
      "type": "object",
      "options": {
        "disable_collapse": true
      },
      "properties": {
        "___name": {
          "$ref": "#/definitions/id",
          "title": "Identifier",
          "propertyOrder": 2,
          "headerTemplate": "{%if settings.language == 'ru'%}Идентификатор{%else%}Identifier{%endif%}",
          "watch": {
            "settings": "settings"
          }
        },
        "___description": {
          "title": "Description",
          "propertyOrder": 1,
          "type": "string",
          "format": "html",
          "headerTemplate": "{%if settings.language == 'ru'%}Описание{%else%}Description{%endif%}",
          "watch": {
            "settings": "settings"
          }
        },
        "___size": {
          "title": "Message data size (bytes)",
          "propertyOrder": 3,
          "type": "integer",
          "exclusiveMinimum": 0,
          "headerTemplate": "{%if settings.language == 'ru'%}Размер данных (байт){%else%}Message data size (bytes){%endif%}",
          "watch": {
            "settings": "settings"
          }
        },
        "___fields": {
          "title": "Fields",
          "headerTemplate": "{%if settings.language == 'ru'%}Данные{%else%}Fields{%endif%}",
          "watch": {
            "settings": "settings"
          },
          "propertyOrder": 4,
          "options": {
            "collapsed": false
          },
          "format": "table",
          "type": "array",
          "minItems": 1,
          "uniqueFields": [
            "id"
          ],
          "items": {
            "title": "Field",
            "type": "object",
            "properties": {
              "type": {
                "title": "Type",
                "headerTemplate": "{%if settings.language == 'ru'%}Тип{%else%}Type{%endif%}",
                "propertyOrder": 1,
                "type": "string",
                "watch": {
                  "user_types": "user_types",
                  "user_enums": "user_enums",
                  "settings": "settings"
                },
                "enumSource": [
                  [
                    "char",
                    "int8_t",
                    "uint8_t",
                    "int16_t",
                    "uint16_t",
                    "int32_t",
                    "uint32_t",
                    "int64_t",
                    "uint64_t",
                    "float",
                    "double"
                  ],
                  {
                    "source": "user_types",
                    "value": "{{item.___name}}"
                  },
                  {
                    "source": "user_enums",
                    "value": "{{item.___name}}"
                  }
                ]
              },
              "array_len": {
                "title": "Array length (0 - if no array)",
                "propertyOrder": 4,
                "type": "integer",
                "Minimum": 0,
                "headerTemplate": "{%if settings.language == 'ru'%}Длинна массива (0 - если не массив){%else%}Array length (0 - if no array){%endif%}",
                "watch": {
                  "settings": "settings"
                }
              },
              "bits": {
                "title": "Amount of used bits (0 - if all)",
                "propertyOrder": 3,
                "type": "integer",
                "Minimum": 0,
                "exclusiveMaximum": 64,
                "headerTemplate": "{%if settings.language == 'ru'%}Кол-во используемых бит (0 - если все){%else%}Amount of used bits (0 - if all){%endif%}",
                "watch": {
                  "settings": "settings"
                }
              },
              "id": {
                "title": "Identifier",
                "propertyOrder": 2,
                "type": "string",
                "minLength": 0,
                "maxLength": 24,
                "pattern": "^[a-zA-Z0-9_]+$",
                "headerTemplate": "{%if settings.language == 'ru'%}Идентификатор{%else%}Identifier{%endif%}",
                "watch": {
                  "settings": "settings"
                }
              },
              "limitation": {
                "title": "Limitation (>, >=, !=, <, <=, ==)",
                "propertyOrder": 5,
                "type": "string",
                "minLength": 0,
                "maxLength": 64,
                "headerTemplate": "{%if settings.language == 'ru'%}Допустимые значениф (>, >=, !=, <, <=, ==){%else%}Limitation (>, >=, !=, <, <=, ==){%endif%}",
                "watch": {
                  "settings": "settings"
                }
              },
              "sampling": {
                "title": "Measurement accuracy",
                "propertyOrder": 7,
                "type": "integer",
                "headerTemplate": "{%if settings.language == 'ru'%}ЦМР{%else%}Measurement accuracy{%endif%}",
                "watch": {
                  "settings": "settings"
                }
              },
              "unit": {
                "title": "Units of measurement",
                "propertyOrder": 8,
                "type": "string",
                "headerTemplate": "{%if settings.language == 'ru'%}Единицы измерения{%else%}Units of measurement{%endif%}",
                "watch": {
                  "settings": "settings"
                }
              },
              "description": {
                "title": "Description",
                "propertyOrder": 9,
                "type": "string",
                "format": "html",
                "options": {
                  "wysiwyg": true
                },
                "headerTemplate": "{%if settings.language == 'ru'%}Описание{%else%}Description{%endif%}",
                "watch": {
                  "settings": "settings"
                }
              }
            },
            "additionalProperties": true,
            "required": [
              "type",
              "description",
              "id"
            ]
          }
        }
      },
      "additionalProperties": true,
      "required": [
        "___name",
        "___description",
        "___fields"
      ]
    }
  },
  "title": "Protocol generator",
  "headerTemplate": "{{self.title}}",
  "type": "object",
  "properties": {
    "settings": {
      "headerTemplate": "{%if self.language == 'ru'%}Настройки{%else%}Settings{%endif%}",
      "type": "object",
      "format": "table",
      "properties": {
        "language": {
          "headerTemplate": "{%if self == 'ru'%}Язык{%else%}Language{%endif%}",
          "type": "string",
          "enum": [
            "ru",
            "en"
          ]
        },
        "endian": {
          "headerTemplate": "{%if settings.language == 'ru'%}Порядок байт{%else%}Endian{%endif%}",
          "type": "string",
          "enum": [
            "Big",
            "Little"
          ],
          "watch": {
            "settings": "settings"
          }
        }
      }
    },
    "organization": {
      "headerTemplate": "{%if settings.language == 'ru'%}Орагнизации учавствующие в разработке{%else%}Organizations{%endif%}",
      "watch": {
        "settings": "settings"
      },
      "propertyOrder": 2,
      "options": {
        "collapsed": true
      },
      "format": "table",
      "type": "array",
      "minItems": 1,
      "items": {
        "title": "Organization",
        "headerTemplate": "{%if settings.language == 'ru'%}Организация{%else%}Organization{%endif%}",
        "watch": {
          "settings": "settings"
        },
        "type": "object",
        "properties": {
          "name": {
            "title": "Organization",
            "headerTemplate": "{%if settings.language == 'ru'%}Организация{%else%}Organization{%endif%}",
            "watch": {
              "settings": "settings"
            },
            "propertyOrder": 1,
            "type": "string",
            "format": "text",
            "minLength": 1
          }
        }
      }
    },
    "author": {
      "headerTemplate": "{%if settings.language == 'ru'%}Авторы{%else%}Authors{%endif%}",
      "watch": {
        "settings": "settings"
      },
      "propertyOrder": 3,
      "options": {
        "collapsed": true
      },
      "format": "table",
      "type": "array",
      "minItems": 1,
      "items": {
        "headerTemplate": "{%if settings.language == 'ru'%}Автор{%else%}Author{%endif%}",
        "watch": {
          "settings": "settings"
        },
        "type": "object",
        "properties": {
          "name": {
            "title": "Full Name",
            "headerTemplate": "{%if settings.language == 'ru'%}ФИО{%else%}Full Name{%endif%}",
            "watch": {
              "settings": "settings"
            },
            "propertyOrder": 1,
            "type": "string",
            "minLength": 1
          },
          "post": {
            "title": "Post",
            "headerTemplate": "{%if settings.language == 'ru'%}Должность{%else%}Post{%endif%}",
            "watch": {
              "settings": "settings"
            },
            "propertyOrder": 2,
            "type": "string"
          },
          "executor": {
            "title": "Is",
            "headerTemplate": "{%if settings.language == 'ru'%}Подписвает как{%else%}Is{%endif%}",
            "watch": {
              "settings": "settings"
            },
            "propertyOrder": 3,
            "type": "string",
            "enum": [
              "executor",
              "matching",
              "asserting that"
            ]
          },
          "organization": {
            "title": "Organization",
            "headerTemplate": "{%if settings.language == 'ru'%}Организация{%else%}Organization{%endif%}",
            "propertyOrder": 4,
            "type": "string",
            "format": "text",
            "watch": {
              "organization": "organization",
              "settings": "settings"
            },
            "enumSource": [
              [
                ""
              ],
              {
                "source": "organization",
                "value": "{{item.name}}"
              }
            ]
          }
        }
      }
    },
    "name": {
      "$ref": "#/definitions/id",
      "headerTemplate": "{%if settings.language == 'ru'%}Идентификатор{%else%}Identifier{%endif%}",
      "watch": {
        "settings": "settings"
      },
      "propertyOrder": 5
    },
    "title": {
      "headerTemplate": "{%if settings.language == 'ru'%}Заголовок документа{%else%}Document title{%endif%}",
      "watch": {
        "settings": "settings"
      },
      "propertyOrder": 0,
      "type": "string"
    },
    "description": {
      "headerTemplate": "{%if settings.language == 'ru'%}Описание{%else%}Description{%endif%}",
      "watch": {
        "settings": "settings"
      },
      "propertyOrder": 1,
      "type": "string",
      "format": "html"
    },
    "versions": {
      "headerTemplate": "{%if settings.language == 'ru'%}Версия{%else%}Protocol version{%endif%}",
      "propertyOrder": 4,
      "type": "array",
      "format": "tabs",
      "options": {
        "disable_edit_json": true,
        "collapsed": true
      },
      "items": {
        "title": "Version",
        "allOf": [
          {
            "$ref": "#/definitions/version"
          },
          {
            "properties": {
              "changes": {
                "title": "Changes",
                "headerTemplate": "{%if settings.language == 'ru'%}Изменения{%else%}Changes{%endif%}",
                "type": "string",
                "format": "html",
                "propertyOrder": 4,
                "watch": {
                  "settings": "settings"
                }
              }
            }
          }
          ]
      },
      "watch": {
        "settings": "settings"
      },
      "uniqueFields": [
        "major"
      ]
    },
    "license": {
      "headerTemplate": "{%if settings.language == 'ru'%}Лицензия на сгенерированный исходный код{%else%}License{%endif%}",
      "watch": {
        "settings": "settings"
      },
      "propertyOrder": 6,
      "type": "string",
      "format": "html"
    },
    "user_types": {
      "type": "array",
      "headerTemplate": "{%if settings.language == 'ru'%}Пользовательские типы данных{%else%}User's Types{%endif%}",
      "watch": {
        "settings": "settings"
      },
      "format": "tabs",
      "propertyOrder": 9,
      "options": {
        "collapsed": true
      },
      "items": {
        "title": "type",
        "headerTemplate": "{{self.___name}}",
        "allOf": [
          {
            "$ref": "#/definitions/message_scheme"
          },
          {
            "properties": {
              "___title": {
                "type": "string",
                "title": "Type title",
                "propertyOrder": 0,
                "headerTemplate": "{%if settings.language == 'ru'%}Заголовок типа{%else%}Type title{%endif%}",
                "watch": {
                  "settings": "settings"
                }
              }
            }
          }
        ]
      },
      "uniqueFields": [
        "___name"
      ]
    },
    "user_enums": {
      "type": "array",
      "headerTemplate": "{%if settings.language == 'ru'%}Перечисления (тип данных){%else%}User's enumerates{%endif%}",
      "watch": {
        "settings": "settings"
      },
      "format": "tabs",
      "propertyOrder": 10,
      "options": {
        "collapsed": true
      },
      "items": {
        "title": "enum",
        "headerTemplate": "{{self.___name}}",
        "allOf": [
          {
          },
          {
            "properties": {
              "type": {
                "title": "Type",
                "headerTemplate": "{%if settings.language == 'ru'%}Тип{%else%}Type{%endif%}",
                "watch": {
                  "settings": "settings"
                },
                "propertyOrder": 1,
                "type": "string",
                "enum": [
                  "char",
                  "int8_t",
                  "uint8_t",
                  "int16_t",
                  "uint16_t",
                  "int32_t",
                  "uint32_t",
                  "int64_t",
                  "uint64_t"
                ]
              },
              "___name": {
                "$ref": "#/definitions/id",
                "title": "Identifier",
                "propertyOrder": 2,
                "headerTemplate": "{%if settings.language == 'ru'%}Идентификатор{%else%}Identifier{%endif%}",
                "watch": {
                  "settings": "settings"
                }
              },
              "___title": {
                "type": "string",
                "title": "Type title",
                "propertyOrder": 0,
                "headerTemplate": "{%if settings.language == 'ru'%}Заголовок типа{%else%}Type title{%endif%}",
                "watch": {
                  "settings": "settings"
                }
              },
              "description": {
                "title": "Description",
                "propertyOrder": 1,
                "type": "string",
                "format": "html",
                "headerTemplate": "{%if settings.language == 'ru'%}Описание{%else%}Description{%endif%}",
                "watch": {
                  "settings": "settings"
                }
              },
              "___numbers": {
                "title": "Value",
                "headerTemplate": "{%if settings.language == 'ru'%}Значение{%else%}Value{%endif%}",
                "watch": {
                  "settings": "settings"
                },
                "propertyOrder": 4,
                "options": {
                  "collapsed": false
                },
                "format": "table",
                "type": "array",
                "minItems": 1,
                "uniqueFields": [
                  "number"
                ],
                "items": {
                  "title": "Number",
                  "headerTemplate": "{%if settings.language == 'ru'%}Значение{%else%}Number{%endif%}",
                  "watch": {
                    "settings": "settings"
                  },
                  "type": "object",
                  "properties": {
                    "number": {
                      "title": "Number",
                      "propertyOrder": 1,
                      "type": "integer",
                      "headerTemplate": "{%if settings.language == 'ru'%}Значение{%else%}Number{%endif%}",
                      "watch": {
                        "settings": "settings"
                      }
                    },
                    "id": {
                      "title": "Identifier",
                      "propertyOrder": 2,
                      "type": "string",
                      "minLength": 0,
                      "maxLength": 24,
                      "pattern": "^[a-zA-Z0-9_]+$",
                      "headerTemplate": "{%if settings.language == 'ru'%}Идентификатор{%else%}Identifier{%endif%}",
                      "watch": {
                        "settings": "settings"
                      }
                    },
                    "description": {
                      "title": "Description",
                      "propertyOrder": 9,
                      "type": "string",
                      "format": "html",
                      "options": {
                        "wysiwyg": true
                      },
                      "headerTemplate": "{%if settings.language == 'ru'%}Описание{%else%}Description{%endif%}",
                      "watch": {
                        "settings": "settings"
                      }
                    }
                  },
                  "additionalProperties": true,
                  "required": [
                    "number",
                    "description",
                    "id"
                  ]
                }
              }
            }
          }
        ]
      },
      "uniqueFields": [
        "___name"
      ]
    },
    "header": {
      "headerTemplate": "{%if settings.language == 'ru'%}Заголовок сообщений{%else%}Protocol header format{%endif%}",
      "watch": {
        "settings": "settings"
      },
      "propertyOrder": 7,
      "type": "object",
      "allOf": [
        {
          "$ref": "#/definitions/message_scheme"
        },
        {
          "properties": {
            "___fields": {
              "items": {
                "properties": {
                  "LogicalType": {
                    "type": "string",
                    "title": "Logical type",
                    "headerTemplate": "{%if settings.language == 'ru'%}Логический тип{%else%}Logical type{%endif%}",
                    "watch": {
                      "settings": "settings"
                    },
                    "enum": [
                      "none",
                      "number",
                      "unique",
                      "size",
                      "version_major",
                      "version_minor",
                      "crc"
                    ]
                  }
                }
              },
              "contains": {
                "type": "object",
                "properties": {
                  "LogicalType": {
                    "const": "number"
                  }
                }
              }
            }
          }
        }
      ]
    },
    "messages": {
      "type": "array",
      "headerTemplate": "{%if settings.language == 'ru'%}Сообщения{%else%}Messages{%endif%}",
      "watch": {
        "settings": "settings"
      },
      "format": "tabs",
      "propertyOrder": 11,
      "options": {
        "collapsed": true
      },
      "items": {
        "title": "Message",
        "headerTemplate": "{{self.___number}}",
        "allOf": [
          {
            "$ref": "#/definitions/message_scheme"
          },
          {
            "$ref": "#/definitions/header_id"
          },
          {
            "properties": {
              "___title": {
                "type": "string",
                "title": "Message title",
                "propertyOrder": 0,
                "headerTemplate": "{%if settings.language == 'ru'%}Заголовок сообщения{%else%}Message title{%endif%}",
                "watch": {
                  "settings": "settings"
                }
              },
              "___type": {
                "type": "string",
                "title": "Message type",
                "propertyOrder": 0,
                "enum": [
                  "static",
                  "dynamic"
                ],
                "headerTemplate": "{%if settings.language == 'ru'%}Тип сообщения{%else%}Message type{%endif%}",
                "watch": {
                  "settings": "settings"
                }
              },
              "___parent": {
                "type": "string",
                "title": "Parent message",
                "propertyOrder": 0,
                "watch": {
                  "messages": "messages",
                  "settings": "settings"
                },
                "enumSource": [
                  [
                    ""
                  ],
                  {
                    "source": "messages",
                    "value": "{{item.___number}}",
                    "filter": "{%if item.___number != self.___number %}1{%else%}0{%endif%}"
                  }
                ],
                "headerTemplate": "{%if settings.language == 'ru'%}Базовое сообщения{%else%}Parent message{%endif%}"
              },
              "___fields": {
                "items": {
                  "properties": {
                    "LogicalType": {
                      "type": "string",
                      "title": "Logical type",
                      "enum": [
                        "none",
                        "dynamic array"
                      ],
                      "headerTemplate": "{%if settings.language == 'ru'%}Логический тип{%else%}Logical type{%endif%}",
                      "watch": {
                        "settings": "settings"
                      }
                    },
                    "TypeOfLogicalType": {
                      "title": "Type of logical type",
                      "type": "string",
                      "watch": {
                        "user_types": "user_types",
                        "user_enums": "user_enums",
                        "settings": "settings"
                      },
                      "headerTemplate": "{%if settings.language == 'ru'%}Тип логического типа{%else%}Type of logical type{%endif%}",
                      "enumSource": [
                        [
                          "char",
                          "int8_t",
                          "uint8_t",
                          "int16_t",
                          "uint16_t",
                          "int32_t",
                          "uint32_t",
                          "int64_t",
                          "uint64_t",
                          "float",
                          "double"
                        ],
                        {
                          "source": "user_types",
                          "value": "{{item.___name}}"
                        },
                        {
                          "source": "user_enums",
                          "value": "{{item.___name}}"
                        }
                      ]
                    },
                    "type": {
                      "title": "Type",
                      "propertyOrder": 1,
                      "type": "string",
                      "watch": {
                        "user_types": "user_types",
                        "user_enums": "user_enums",
                        "settings": "settings"
                      },
                      "headerTemplate": "{%if settings.language == 'ru'%}Тип {%else%}Type{%endif%}",
                      "enumSource": [
                        {
                          "source": "user_types",
                          "value": "{{item.___name}}"
                        },
                        {
                          "source": "user_enums",
                          "value": "{{item.___name}}"
                        }
                      ]
                    },
                    "DynamicOrder": {
                      "title": "Dynamic array order",
                      "headerTemplate": "{%if settings.language == 'ru'%}Очерёдность дин. массивов{%else%}Dynamic array order{%endif%}",
                      "watch": {
                        "settings": "settings"
                      },
                      "type": "integer"
                    }
                  }
                }
              }
            }
          }
        ]
      },
      "uniqueFields": [
        "___number",
        "___name"
      ]
    }
  },
  "additionalProperties": true,
  "required": [
    "name",
    "description",
    "header"
  ],
  "options": {
    "disable_collapse": true
  }
}
