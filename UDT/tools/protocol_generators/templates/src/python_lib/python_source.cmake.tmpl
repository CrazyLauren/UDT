{% set project_name = name|upper %}
{% set target_name = name|lower + '_python' %}

if((NOT Python3_FOUND AND NOT PYTHONLIBS_FOUND) OR NOT SWIG_FOUND)
    set(${PROJECT_NAME}_BUILD_COMPONENT_PYTHON
        FALSE
        CACHE BOOL "Build Python bindings"
        FORCE)
    message(WARNING "Python Component disabled because SWIG or Python was not found")
    return()
endif()

set(PYTHON_SITE_PACKAGES
    "${${PROJECT_NAME}_INSTALL_PREFIX}${CMAKE_INSTALL_LIBDIR}/python${Python3_VERSION_MAJOR}.${Python3_VERSION_MINOR}/dist-packages/${PROJECT_NAME}")

set(_TARGET_NAME {{ target_name }})


include(${SWIG_USE_FILE})

set (_PUBLIC_LIBRARIS
		CRAZY_LAUREN::customer
		)
set (_PUBLIC_INCLUDE_DIR
		#
		)
set (_PRIVATE_INCLUDE_DIR
		${CMAKE_CURRENT_SOURCE_DIR}/../include
		${CMAKE_BINARY_DIR}/include
		${CMAKE_CURRENT_SOURCE_DIR}
        "${CMAKE_BINARY_DIR}/src/${_TARGET_NAME}"
		)

helper_add_swig_python_library(${_TARGET_NAME}
                                _PUBLIC_LIBRARIS
                                _PUBLIC_INCLUDE_DIR
                                _PRIVATE_INCLUDE_DIR
								"${CMAKE_BINARY_DIR}/src/${_TARGET_NAME}/swig"
								${PYTHON_SITE_PACKAGES}
								)
set(${SWIG_MODULE_${_TARGET_NAME}_REAL_NAME}_PYTHONS_DEPENDS_MODULES
        "UDT>=0.5"
        CACHE INTERNAL "Depends python modules "
	    FORCE
    )
set(_SWIG_TARGET_NAME ${SWIG_MODULE_${_TARGET_NAME}_REAL_NAME})

configure_file( ${CMAKE_CURRENT_SOURCE_DIR}/protocol_{{ name | lower }}_python_revision.h.in
                "${CMAKE_BINARY_DIR}/src/${_TARGET_NAME}/protocol_{{ name | lower }}_python_revision.h")

configure_file( ${CMAKE_CURRENT_SOURCE_DIR}/ChangeLog.txt.in
                "${CMAKE_BINARY_DIR}/src/${_TARGET_NAME}/ChangeLog.txt")

configure_target_version(${_SWIG_TARGET_NAME}
		${CMAKE_CURRENT_SOURCE_DIR}
		"${CMAKE_BINARY_DIR}/src/${_TARGET_NAME}/"
        "${CMAKE_BINARY_DIR}/src/${_TARGET_NAME}/"
		)
target_sources(${_SWIG_TARGET_NAME}
        PRIVATE "${CMAKE_BINARY_DIR}/src/${_TARGET_NAME}/revision.c")

install(TARGETS ${_SWIG_TARGET_NAME}
        LIBRARY DESTINATION ${PYTHON_SITE_PACKAGES} COMPONENT libraries
        ARCHIVE DESTINATION ${PYTHON_SITE_PACKAGES} COMPONENT libraries
        RUNTIME DESTINATION ${PYTHON_SITE_PACKAGES} COMPONENT libraries
        )

