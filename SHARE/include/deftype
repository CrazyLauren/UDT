/*
 * deftype
 *
 * Copyright © 2016 Sergey Cherepanov (sergey0311@gmail.com)
 *
 *  Created on: 12.04.2012
 *      Author: Sergey Cherepanov (https://github.com/CrazyLauren)
 *
 * Distributed under MPL 2.0 (See accompanying file LICENSE.txt or copy at
 * https://www.mozilla.org/en-US/MPL/2.0)
 */
#ifndef DEFTYPE_
#define DEFTYPE_

#ifdef ENABLE_VTUNE
#	include <profiler_vtune.h>
#else
#	define ProfileScopeEvent(x)
#	define THREAD_NAME(n,i)
#	define PROFILE_INIT()
#	define PROFILE_PAUSE()
#	define PROFILE_RESUME()
#endif

#if (__cplusplus>= 201103L) || (_MSC_VER >= 1800) //fucking msvc
#	include <unordered_set>
#	include <unordered_map>
#	define HASH_SET std::unordered_set
#	define HASH_MAP std::unordered_map
#	define HASH_MULTISET std::unordered_multiset
#	define HASH_MULTIMAP std::unordered_multimap
#	define HASH std::hash
#else
#	include<boost/unordered_set.hpp>
#	include<boost/unordered_map.hpp>
#	define HASH_SET boost::unordered_set
#	define HASH_MAP boost::unordered_map
#	define HASH_MULTISET boost::unordered_multiset
#	define HASH_MULTIMAP boost::unordered_multimap
#endif

#include <set>
#include <map>
#include <string>
#include <vector>
#include <list>
#include <queue>
#include <stdint.h>
#include <cassert>
#include <exception>
#include <iterator>
#include <iostream>
#include <stdio.h>
#include <math.h>
#include <string.h>
#include <stdlib.h>
#include <macro_attributes.h>

#if defined (__QNX__)
#	define HAVE_POSIX_SEMAPHORES
#	include <sys/neutrino.h>
#	include <boost/shared_ptr.hpp>
#	include <ctype.h>
#	include <limits>
#	include <malloc.h>

#	define SHARED_PTR boost::shared_ptr 

#elif defined(unix) || defined(__MINGW32__)
//#elif _WIN32
#	define HAVE_POSIX_SEMAPHORES
#	include <limits>

#	if (__cplusplus>= 201103L)
#		ifdef __MINGW32__//version of gcc
#			include <tr1/memory>
#			include<tr1/shared_ptr.h>
#			define SHARED_PTR std::tr1::shared_ptr
#		else
#			include<shared_ptr.h>
#			define SHARED_PTR std::shared_ptr
#		endif
#	else
# 	include <tr1/memory>
#	define SHARED_PTR std::tr1::shared_ptr
# 	endif

/*
namespace __gnu_cxx //FIXME � ����� ������ gcc �� ���������� ���������� ��� �����
{
  using namespace std;

  template<>
    struct hash<string>
    {
      size_t operator()(const string& s) const
      {
        const collate<char>& c = use_facet<collate<char> >(locale::classic());
        return c.hash(s.c_str(), s.c_str() + s.size());
      }
    };
}

#	define HASH __gnu_cxx::hash
#	define HASH_SET __gnu_cxx::hash_set
#	define HASH_MAP __gnu_cxx::hash_map
*/
#elif defined(_WIN32)
#	if (__cplusplus>= 201103L) || (_MSC_VER >= 1800) //fucking msvc
/*
#		define HASH std::hash
#		define HASH_SET std::unordered_set
#		define HASH_MAP std::unordered_map
*/
#	else
/*
#		define HASH std::hash
#		define HASH_SET std::hash_set
#		define HASH_MAP std::hash_map
*/
#	endif
#	define SHARED_PTR std::shared_ptr 
#endif //#elif defined(_WIN32)

#ifdef _WIN32
#	ifdef _MSC_VER
#		ifndef NOMINMAX
#			define NOMINMAX
#		endif
#		include <win_unistd.h>
#	pragma warning(disable : 4290)
#	pragma warning(disable : 4996)
#	pragma warning(disable : 4355)
#	pragma warning(disable : 4251)
#	else
#		include <unistd.h> //mingw,cygwin
#	endif
#	include <winsock2.h>
#	include <windows.h>
#	ifdef _MSC_VER
#		include <memory>
#	undef uuid_t
#	endif
#else
#	include <unistd.h>
#endif

#if   defined(__QNX__)||defined(unix) ||  defined(__MINGW32__)
#include <pthread.h>                        // POSIX threads support
#include <errno.h>
#endif


#ifdef  __QNX__
#include <sys/time.h>
#else
#include <ctime>
#endif
#include <errno.h>

#include <stdexcept>
#include <stdlib.h>
#include <sstream>
#include <limits.h>
#include <functional>

#include <type_manip.h>
//#include <type_utf8.h>
#include <UType/CDenyCopying.h>
#include <UType/CRAII.h>
#include <UType/CFlags.h>
#include <UType/CMutex.h>
#include <UType/CSharedCounter.h>
#include <UType/CText.h>
#include <UType/strtonum.h>
#include <UType/numtostr.h>
#include <UType/CAssertException.h>
#include <uclock.h>
#include <logging/share_trace.h>
#include <UType/CSingleton.h>
#include <UType/CAntiHang.h>
#include <UType/CCheckNoMultiThread.h>
#include <UType/CIntrusived.h>
#include <UType/CTypeInfo.h>
#include <FloatCompare.h>
#include <UType/SmartField.h>
#include <UType/IAllocater.h>
#include <UType/CBuffer.h>
#include <UType/CConfig.h>
#include <UType/version.h>
#include <UType/uuid.h>
#include <UType/intrusive_ptr.h>
#include <dymamic_modules.h>
#include <UType/deftype.h>
#include <UType/deffunc.h>
#include <UType/CCondvar.h>
#include <UType/CSemaphore.h>

#include <UType/CIPCSem.h>


//#include <interface/IEvent.h> //TODO � �����
#include <UType/CEvents.h>
#include <UType/CEvent.h>
#include <UType/CThread.h>
#include <UType/CThreadPool.h>
#include <UType/CSafeData.h>
#include <UType/CPFile.h>
#include <UType/CFile.h>
//#include <UType/CMutex.h>
#include <UType/CWaitingQueue.h>
#include <UType/CSafeQueue.h>
#include <UType/CCounter.h>

#include <UType/sync_field_t.h>
#include <UType/IFactory.h>
#include <UType/CFactoryManager.h>
#include <UType/CFactoryRegisterer.h>
#include <UType/CAddress.h>
//#ifdef __MINGW32__
//#	define _WIN32
//#	undef unix
//#endif //__MINGW32__
#endif /*DEFTYPE_*/
